<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"><title data-react-helmet="true">Backtest Report | DODO Docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Backtest Report | DODO Docs"><meta data-react-helmet="true" name="description" content="Background"><meta data-react-helmet="true" property="og:description" content="Background"><meta data-react-helmet="true" property="og:url" content="https://DODOEX.github.io//docs/docs/backtest"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://DODOEX.github.io//docs/docs/backtest"><link rel="stylesheet" href="/docs/styles.1fa60318.css">
<link rel="preload" href="/docs/styles.e7225736.js" as="script">
<link rel="preload" href="/docs/runtime~main.4cc03fc7.js" as="script">
<link rel="preload" href="/docs/main.b7890662.js" as="script">
<link rel="preload" href="/docs/1.0b653ca5.js" as="script">
<link rel="preload" href="/docs/2.77bec084.js" as="script">
<link rel="preload" href="/docs/3.00ad4264.js" as="script">
<link rel="preload" href="/docs/1be78505.07f58419.js" as="script">
<link rel="preload" href="/docs/45.eda45983.js" as="script">
<link rel="preload" href="/docs/64f9f2ab.034b5c3e.js" as="script">
<link rel="preload" href="/docs/17896441.cd429372.js" as="script">
<link rel="preload" href="/docs/1d933edd.10b925b7.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/docs/"><img class="navbar__logo" src="/docs/img/logo.svg" alt="DODO"><strong class="navbar__title">DODO Docs</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/docs/">Docs</a><a href="https://github.com/DODOEX" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docs/"><img class="navbar__logo" src="/docs/img/logo.svg" alt="DODO"><strong class="navbar__title">DODO Docs</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/DODOEX" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Start</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/">Introduction of DODO</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Protocol</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/features">DODO&#x27;s Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/coreConcept">Core Concept</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/math">Math details</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contract</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/framework">Framework</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/contractUseGuide">Use Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/flashSwap">Flash Swap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/deployedInfo">Deployed</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/bugBounty">Bug Bounty üí∞</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/audit">Audit</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Use Case</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/docs/initialDODOOffering">Initial DODO Offering</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Advanced Topics</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/authority">Authority</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/docs/decentralization">Decentralization</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/docs/backtest">Backtest</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Backtest Report</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="background"></a>Background<a aria-hidden="true" tabindex="-1" class="hash-link" href="#background" title="Direct link to heading">#</a></h2><p>PMM stands for Proactive Market Maker, which is essentially a quantitative trading strategy used by liquidity providers (LP). To help LP understand ROI of PMM, we‚Äôve performed a backtest to demonstrate the performance of PMM in different market environments.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="method"></a>Method<a aria-hidden="true" tabindex="-1" class="hash-link" href="#method" title="Direct link to heading">#</a></h2><p>Evaluation of PMM focuses on these two aspects: proÔ¨Åt and loss.</p><p>The proÔ¨Åt for LP is turnover rate multiplied by fee rate.</p><p>While the loss has to be explained in two perspectives, counterparty risk and arbitrage trading.</p><p>Counterparty risk can be ignored in this case, because PMM has built a mechanism to limit this risk. In addition, the risk comes from trades by normal users, which are almost random and are statistically balanced against.</p><p>Arbitrage trading is inevitable and contributes most of the loss, as onchain oracle price is always delayed from market.</p><p>Hence, in the following backtesting, we focus on these two key values:</p><ul><li>Turnover rate (profit wise)</li><li>Arbitrage loss (loss wise)</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="backtest"></a>Backtest<a aria-hidden="true" tabindex="-1" class="hash-link" href="#backtest" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="profit-evaluation"></a>Profit evaluation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#profit-evaluation" title="Direct link to heading">#</a></h3><p>Assumptions:</p><ul><li>Our pool size is 1/10 of uniswap&#x27;s pool size</li><li>Base Token and Quote Token have the same value</li><li>PMM parameter k=0.1</li><li>Fee rate 0.3%</li></ul><p>Those assumptions are not set arbitrarily. Under this condition, PMM could provide the same liquidity as Uniswap, and hence it&#x27;s reasonable to assume PMM has the same trading volume as Uniswap. However, because of aggregators, it&#x27;s more realistic to assume PMM has half of the trading volume of Uniswap. According to <a href="https://uniswap.info/pair/0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc" target="_blank" rel="noopener noreferrer">history data</a>, PMM daily turnover rate is about 100% and ROI is 0.3%.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The backtest report is written at 2020/7/19. We use uniswap&#x27;s historical data from 2020/6/1 to 2020/7/18.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="loss-evaluation"></a>Loss evaluation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#loss-evaluation" title="Direct link to heading">#</a></h3><p>It&#x27;s more complex to evaluate arbitrage loss, as no PMM-like algorithm has been deployed before. The best alternative is backtest with the most stringent standards. below is the assumptions:</p><ul><li>Onchain oracle price is always delayed from market price</li><li>Oracle price updates whenever deviates from market price by more than 0.5% (chainlink threshold)</li><li>Arbitrageurs always have enough funding and never miss a trade</li><li>The external cost of arbitrageurs is 0.2% (including CEX fees and gas cost)</li></ul><p>We backtested using BTC price from Apr-2018 to Apr-2020 with 1 minute interval. Aggregate profit and loss, we got the following conclusions.</p><p><img src="https://dodoex.github.io/docs/img/dodo_backtest.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="conclusion"></a>Conclusion<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>The backtesting has covered most cases of the market environment, both the bull and bear market, even including the black swan event on 12th March. We concluded that:</p><ul><li>In most market environments, the fee income is sufficient to cover arbitrage losses and provides a very high rate of return (~80% APR)</li><li>When the market changes volatilely, despite of rises or falls, LP will lose a significant amount of money</li></ul><p>In brief, PMM makes proÔ¨Åts when the market is flat, while makes losses when volatile.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="advantage--disadvantage"></a>Advantage &amp; Disadvantage<a aria-hidden="true" tabindex="-1" class="hash-link" href="#advantage--disadvantage" title="Direct link to heading">#</a></h3><p>Most quant strategies make proÔ¨Åts only when market price goes up or down, and there is nothing to do when the market is flat. In contrast, PMM can make considerable proÔ¨Åts when the price is nearly flat. Furthermore, unlike AMM, PMM never requires LP to deposit base and quote assets at a certain ratio. Instead, LP could deposit any amount of any asset as they want. As a result, PMM can be a supplement to the original strategies when the market is not volatile.</p><p>Nevertheless, we have to point out its disadvantages. As the old saying goes, there is no free lunch. When the market is volatile, LP suffers from significant loss. LP should make a balance between risks and beneÔ¨Åts. So we recommend traders withdraw their assets when they predict the market to be volatile. As a decentralized project, what we can do is very limited. But we would deÔ¨Ånitely try our best to adjust system parameters to help LP, especially when black swan event happens.</p><p>In addition, one of the inherent drawbacks of backtesting is it cannot simulate 100% of the real trading. But to mitigate this risk, we have performed the backtesting with the most conservative assumptions. Still, LP should determine to what extent they trust the backtesting result.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="faq-about-backtest"></a>FAQ about backtest<a aria-hidden="true" tabindex="-1" class="hash-link" href="#faq-about-backtest" title="Direct link to heading">#</a></h3><ol><li><p>Where does the turnover rate data come from?</p><p>We have counted the historical data of <a href="https://uniswap.info/pair/0xb4e16d0168e52d35cacd2c6185b44281ec28c9dc" target="_blank" rel="noopener noreferrer">Uniswap</a> in the past month. Because the capital utilization rate of PMM algorithm is very high, the capital utilization rate can reach ten times that of Uniswap. So the actual turnover rate is also much higher than Uniswap.</p></li><li><p>Why do you use BTC price for backtesting?</p><p>Because we did not find ETH price data of high-precision. We would be very grateful if someone could provide ETH price historical data with 1min interval or more frequent. But it is reasonable to use BTC price to estimate loss, because ETH and BTC prices are highly correlated.</p></li><li><p>How does the arbitrage work?</p><p>The arbitrage is carried out when arbitrageurs notice that the price provided by the PMM is more beneficial to them than the market price, i.e. the difference between the PMM and the market price is less than its comprehensive arbitrage cost (PMM Fee + Arbitrage Cost)</p></li><li><p>Given that Chainlink&#x27;s BTC Oracle accuracy rate is 1%, why is it set to 0.5% here?</p><p>First of all, Chainlink will increase the accuracy rate of BTC Oracle to 0.5% soon. Secondly, PMM will focus on ETH trading pair for now. And the accuracy rate of Chainlink‚Äôs ETH Oracle is 0.5%.</p></li><li><p>Does the size of the funding pool have an impact on the backtest?</p><p>Yes, it does. ROI will not be so good if the pool size is too small. We need enough liquidity to compete with other liquidity sources. Actually, the 1/10 of Uniswap pool size required for backtesting is able to produce competitive liquidity, which equals only $900,000.</p></li><li><p>How about the gas cost</p><p>Swap between two standard ERC20 token cost 145,000 ~ 175,000 gas. The gas cost is slightly higher than uniswap(~100,000 gas), but significantly lower than other protocols. For example, kyber costs ~400,000gas; balancer costs ~300,000 gas; dydx costs ~400,000 gas;</p></li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/DODOEX/docs/edit/master/docs/backtest.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/docs/decentralization"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Decentralization</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link">Background</a></li><li><a href="#method" class="table-of-contents__link">Method</a></li><li><a href="#backtest" class="table-of-contents__link">Backtest</a><ul><li><a href="#profit-evaluation" class="table-of-contents__link">Profit evaluation</a></li><li><a href="#loss-evaluation" class="table-of-contents__link">Loss evaluation</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a><ul><li><a href="#advantage--disadvantage" class="table-of-contents__link">Advantage &amp; Disadvantage</a></li><li><a href="#faq-about-backtest" class="table-of-contents__link">FAQ about backtest</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright ¬© 2020 DODOEX, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/docs/styles.e7225736.js"></script>
<script src="/docs/runtime~main.4cc03fc7.js"></script>
<script src="/docs/main.b7890662.js"></script>
<script src="/docs/1.0b653ca5.js"></script>
<script src="/docs/2.77bec084.js"></script>
<script src="/docs/3.00ad4264.js"></script>
<script src="/docs/1be78505.07f58419.js"></script>
<script src="/docs/45.eda45983.js"></script>
<script src="/docs/64f9f2ab.034b5c3e.js"></script>
<script src="/docs/17896441.cd429372.js"></script>
<script src="/docs/1d933edd.10b925b7.js"></script>
</body>
</html>